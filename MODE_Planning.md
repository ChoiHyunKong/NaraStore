# 플랜 모드 강화

**목적**: Red Team/Blue Team 분석을 통한 균형잡힌 의사결정과 위험 평가

## 개요

플랜 모드는 이제 대립적 분석(adversarial analysis)을 포함하여 구현 전 기회와 위험을 모두 파악합니다.

## Red Team / Blue Team 프레임워크

### Blue Team (옹호자 관점)
**질문**: "이 계획이 왜 성공할 수 있는가?"

**분석 포커스:**
- 강점: 이 접근법의 장점은?
- 기회: 어떤 이득이 가능한가?
- 실현가능성: 이 계획이 얼마나 현실적인가?
- 가치: 어떤 이점을 제공하는가?

**산출물:**
- 성공을 뒷받침하는 구체적 강점
- 요구사항 이상의 기술적/시장적 기회
- 실현가능성 평가 (HIGH/MEDIUM/MEDIUM-HIGH)
- 기대 이점 및 가치 창출

### Red Team (비판자 관점)
**질문**: "이 계획이 어떻게 실패할 수 있는가?"

**분석 포커스:**
- 약점: 근본적 결함은?
- 리스크: 무엇이 잘못될 수 있는가? (확률: H/M/L, 영향: H/M/L)
- 공격 벡터: 어떻게 악용될 수 있는가?
- 맹점: 무엇을 놓치고 있는가?

**산출물:**
- 구체적 약점과 갭
- 정량화된 리스크 (확률 × 영향)
- 각 리스크의 미티게이션 전략
- 검증 필요한 가정들

## 관여 페르소나

**필수 포함:**
- **Architect (설계자)**: 시스템 설계, 확장성, 통합 영향
- **Security (보안)**: 위협 모델링, 취약점 평가
- **QA (품질보증)**: 테스트 전략, 커버리지, 엣지 케이스
- **Refactorer (리팩토러)**: 유지보수성, 기술 부채, 복잡도

**필요시 포함:**
- **Performance Engineer (성능 엔지니어)**: 속도, 리소스 사용, 병목
- **Backend Architect (백엔드 설계자)**: 데이터 일관성, 신뢰성
- **Frontend Architect (프론트엔드 설계자)**: 사용자 경험, 접근성
- **Root Cause Analyst (근본 원인 분석가)**: 기초 문제 이해

## 분석 프로세스

### 1단계: 계획 명세화
명확히 정의:
- **목표**: 한 문장 목표
- **범위**: 포함/제외 사항
- **복잡도**: simple/moderate/complex
- **일정**: 예상 기간
- **자원**: 팀 규모, 예산, 제약사항

### 2단계: Blue Team 분석
각 페르소나가 답변: "이 계획이 왜 성공할까?"

문서화:
1. 강점 (3-5개 구체적 이점)
2. 기회 (요구사항 이상의 가치)
3. 실현가능성 요인 (기존 자원/지식)
4. 리스크 미티게이션 준비도

### 3단계: Red Team 분석
각 페르소나가 답변: "이 계획이 어떻게 실패할까?"

문서화:
1. 약점 (3-5개 구체적 취약점)
2. 리스크 (확률: H/M/L, 영향: H/M/L)
3. 미티게이션 전략 (우리가 할 일)
4. 검증 필요 가정

### 4단계: 종합 분석 및 판단

**수렴된 통찰**: Blue Team이 어디에서 동의하는가?

**생산적 긴장**: Blue/Red Team이 어디에서 근본적으로 불일치하는가?

**시스템 패턴**: 이 긴장이 기저 시스템에 대해 뭘 드러내는가?

**최종 판단**:
- **즉시 진행**: 저위험, 고가치, 명확한 경로
- **조건부 진행**: 해결 가능한 리스크, 요구사항 있음
- **주의 진행**: 상당한 리스크지만 관리 가능
- **재설계 필요**: 근본적 결함으로 재생각 필요
- **보류/거절**: 너무 위험하거나 우선순위 낮음

## 산출 템플릿

```markdown
## 플랜 세션: [기능/이니셔티브명]

### 계획 요약
- **목표**: [한 문장]
- **범위**: [포함/제외]
- **복잡도**: [simple/moderate/complex]
- **자원**: [팀, 일정, 예산]

---

## Blue Team 분석

### 설계자 관점
**강점:**
- [구체적 설계 이점 1]
- [구체적 설계 이점 2]

**기회:**
- [확장/통합 가능성]

**실현가능성**: HIGH/MEDIUM

### 보안 관점
**강점:**
- [잘 구현된 보안 원칙]

**기회:**
- [보안 기능화 기회]

**실현가능성**: HIGH/MEDIUM

### 품질보증 관점
**강점:**
- [명확한 테스트 경로]
- [잘 정의된 성공 기준]

**실현가능성**: HIGH/MEDIUM

### 리팩토러 관점
**강점:**
- [코드 구성 이점]
- [유지보수성 이점]

**실현가능성**: HIGH/MEDIUM

---

## Red Team 분석

### 설계자 관점
**약점:**
- [구체적 설계 리스크]

**리스크:**
1. [리스크 시나리오] (확률: H/M/L, 영향: H/M/L)
   - 미티게이션: [할 일]

### 보안 관점
**약점:**
- [보안 취약점 또는 미지수]

**리스크:**
1. [보안 리스크 시나리오] (확률: H/M/L, 영향: H/M/L)
   - 미티게이션: [탐지/방지 전략]

### 품질보증 관점
**약점:**
- [테스트 과제]
- [엣지 케이스 또는 미지수]

**리스크:**
1. [품질 리스크] (확률: H/M/L, 영향: H/M/L)
   - 미티게이션: [테스트/검증 전략]

### 리팩토러 관점
**약점:**
- [코드 구성 리스크]
- [유지보수성 우려]

**리스크:**
1. [기술 부채 리스크] (확률: H/M/L, 영향: H/M/L)
   - 미티게이션: [리팩토링 전략]

---

## 종합 분석

**수렴된 통찰:**
- [팀들이 강점에서 동의하는 부분]
- [성공에 대한 공유 가정]

**생산적 긴장:**
- [Blue vs Red 불일치 1]
  - 해결: [조정 방법]

**맹점:**
- [어떤 페르소나도 충분히 다루지 않은 부분]
- [연구/검증 필요한 미지수]

---

## 판단

**권고**: [즉시 진행 | 조건부 진행 | 주의 진행 | 재설계 | 보류]

**조건** (조건부인 경우):
1. [충족해야 할 조건]
2. [적용할 리스크 미티게이션]
3. [검증할 가정]

**성공 지표**:
- [성공 측정 방법]
- [실패/롤백 포인트]

**다음 단계**:
1. [즉시 조치]
2. [진행 전 리스크 검증]
3. [실행 중 모니터링]

---

## 태스크 분해

(승인된 계획에서 자동 생성)

- 태스크 1: [구체적 산출물]
- 태스크 2: [구체적 산출물]
```

## Red Team / Blue Team 분석의 이점

1. **균형잡힌 관점**: 옹호와 회의론을 결합
2. **리스크 식별**: 문제가 실제화되기 전에 표면화
3. **기회 발견**: 원래 요구사항 이상의 가치 식별
4. **의사결정 확신**: 고품질 분석이 좋은 결정 지원
5. **팀 정렬**: 가정에 대한 명시적 토론 강제
6. **의사 기록**: 의사결정 기록 생성

## 플랜 모드 사용 시기

**필수:**
- 복잡한 기능 (>10 태스크)
- 고위험 변경 (보안, 데이터, 성능)
- 주요 아키텍처 결정
- 크로스팀 이니셔티브
- 규정 영향 사용자 기능

**권장:**
- 새 기능 (>5 태스크)
- 주요 리팩토링
- 기술 선택
- 자원 제약 프로젝트

**선택:**
- 버그 수정 (<3 태스크)
- 설정 변경
- 문서 작업
- 단일 파일 수정

## 효과적 분석을 위한 팁

**Blue Team:**
- 단순히 "작동할 것" 말고 구체적으로 왜 작동할지 설명
- 성공을 가능하게 하는 전제 조건 식별
- 이미 있는 자원/지식 문서화
- 실현가능성 한계 솔직하게 평가

**Red Team:**
- 비판만 하지 말고 구체적 실패 시나리오 식별
- 리스크 정량화 (확률 × 영향)
- 경고뿐 아니라 구체적 미티게이션 제안
- 진짜 리스크와 가설적 우려 구분

**종합 분석:**
- 개별 의견 아닌 페르소나 간 패턴 찾기
- 해결 필요한 상충 가정 식별
- 여러 관점을 존중하는 통합 솔루션 제안
- 연구/검증 필요 미지수 문서화

## 다른 모드와의 통합

**상호작용:**
- RULES.md: 플랜 모드 거버넌스 규칙
- PRINCIPLES.md: 설계 옵션 가이드 원칙
- FLAGS.md: 플랜 모드 전 --brainstorm 활성화 가능

**지원:**
- 위험 인식으로 기능 구현
- 다중 관점 분석으로 아키텍처 결정
- 명시적 문서로 팀 정렬
- 구조화된 기록으로 학습
